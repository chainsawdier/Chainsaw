<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Formulário para Contrato de Aluguel</title>
    <style>
      #demo {
        background-color: #fff;
        width: 800px;
        height: 800px;
        line-height: 0.7;
                    }
      .red {
        background-color: red;
        width: 50px;
        height: 50px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Formulário para Eventos</h1>
      <form action="enviar.php" method="POST">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" required /><br />

        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" name="cpf" required /><br />

        <label for="endereco">Endereço do Evento:</label>
        <input type="text" id="endereco" name="endereco" required /><br />

        <label for="data">Data do Evento:</label>
        <input type="date" id="data" name="data" value="dd-mm-yyyy"required /><br />

        <label for="hora-montagem">Hora de Montagem:</label>
        <input
          type="time"
          id="hora-montagem"
          name="hora-montagem"
          required
        /><br />

        <label for="hora-desmonte">Hora de Desmonte:</label>
        <input
          type="time"
          id="hora-desmonte"
          name="hora-desmonte"
          required
        /><br />

        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email" required /><br />

        <label for="telefone">Telefone:</label>
        <input type="tel" id="telefone" name="telefone" required /><br />

        <label for="pago">Valor Sinal Pago:</label>
        <input type="pago" id="pago" name="pago" required /><br />

        <label for="rest">Valor restante:</label>
        <input type="rest" id="rest" name="rest" required /><br />

        <label for="itens">Itens:</label>
        <ul>
          <li>
            <input
              type="checkbox"
              id="kit"
              name="itens[]"
              value="Kit Pegue e monte"
            /><label for="kit">Kit Pegue e monte</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="piscina1"
              name="itens[]"
              value="Piscina de bolinhas de 1,50"
            /><label for="piscina1">Piscina de bolinhas de 1,50</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="piscina2"
              name="itens[]"
              value="Piscina de bolinhas 2,00"
            /><label for="piscina2">Piscina de bolinhas 2,00</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="pula230"
              name="itens[]"
              value="Pula pula 2,30"
            /><label for="pula230">Pula pula 2,30</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="pula200"
              name="itens[]"
              value="Pula pula 2,00"
            /><label for="pula200">Pula pula 2,00</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="tombo"
              name="itens[]"
              value="Tombo legal"
            /><label for="tombo">Tombo legal</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="gangorra-dupla"
              name="itens[]"
              value="Gangorra dupla"
            /><label for="gangorra-dupla">Gangorra dupla</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="gangorra-simples"
              name="itens[]"
              value="Gangorra Simples"
            /><label for="gangorra-simples">Gangorra simples</label>
          </li>
          <li>
            <input
              type="checkbox"
              id="escorrega"
              name="itens[]"
              value="Escorregador"
            /><label for="escorrega">Escorregador</label>
          </li>
        </ul>
        <br />
        <button type="button" onclick="download()">Enviar</button>
      </form>

      <div id="demo"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
      function download() {
        // Obter os valores dos campos do formulário
        var nome = document.getElementById("nome").value;
        var cpf = document.getElementById("cpf").value;
        var endereco = document.getElementById("endereco").value;
        var data = document.getElementById("data").value;
        var horaMontagem = document.getElementById("hora-montagem").value;
        var horaDesmonte = document.getElementById("hora-desmonte").value;
        var email = document.getElementById("email").value;
        var telefone = document.getElementById("telefone").value;
        var pago = document.getElementById("pago").value;
        var rest = document.getElementById("rest").value;
        var itens = [];
        var checkboxes = document.querySelectorAll(
          'input[name="itens[]"]:checked'
        );
        for (var i = 0; i < checkboxes.length; i++) {
          itens.push(checkboxes[i].value);
        }

        var element = document.getElementById("demo"); // Elemento a ser convertido em PDF
        var w = element.offsetWidth;
        var h = element.offsetHeight;
        var offsetTop = element.offsetTop;
        var offsetLeft = element.offsetLeft;
        var canvas = document.createElement("canvas");
        var abs = 0;
        var win_i = window.innerWidth;
        var win_o = window.outerWidth;
        if (win_o > win_i) {
          abs = (win_o - win_i) / 2;
        }
        canvas.width = w * 4;
        canvas.height = h * 4;
        var context = canvas.getContext("2d");
        context.scale(2, 2);
        context.translate(-offsetLeft - abs, -offsetTop);
        html2canvas(element).then(function (canvas) {
          var imgData = canvas.toDataURL("image/png", 1.0);
          var pdf = new jsPDF();
          pdf.setFontSize(14).setFontType('bold');
          pdf.text("Contrato de Locação - Vovô Brinquedos", 60, 10);
          pdf.setFontSize(10).setFontType('normal');
          pdf.text("LOCADOR: Rodrigo Aparecido Duarte, brasileiro, portador do CPF: 329.086.568-17 ", 10, 20);
          pdf.text("LOCATÁRIO: " + nome, 10, 25);
          pdf.text("CPF: " + cpf, 110, 25);
          pdf.text("E-mail: " + email, 10, 30);
          pdf.text("Telefone: " + telefone, 100, 30);
          pdf.text("Endereço do Evento: " + endereco, 10, 35);
          pdf.text("As partes acima identificadas têm, entre si, justas e acertadas o presente contrato de locação para a ", 10, 40);
          pdf.text("data de: " + data, 10, 45);
          pdf.text("iniciando às: " + horaMontagem, 45, 45);
          pdf.text("e com término às: " + horaDesmonte, 80, 45);
          pdf.text("Recebi de "+ nome + " a quantia de R$"+ pago + " referente ao SINAL DE RESERVA",10, 50);
          pdf.text("Restando a quantia de R$"+ rest + " a ser pago até a data do evento em espécie, pix ou cartão.",10, 55);
          pdf.setFontSize(9).setFontType('bold');
          pdf.text("NOTAS:",20, 65);
          pdf.text("1 - Este contrato de locação poderá ser cancelado, desde que a VOVÔ BRINQUEDOS seja avisada com uma ",15, 75);
          pdf.text("semana de antecedência, para que seja feito o processo de cancelamento, o qual não implicará na",15, 80);
          pdf.text("devolução do SINAL DE RESERVA pelo LOCADOR, caso LOCATÁRIO tenha efetuado o pagamento da RESERVA",15, 85);
          pdf.text("2 - Cabe ao LOCATÁRIO verificar se todos os itens ao qual tem desejo de locar cabem no local do evento ",15, 90);
          pdf.text("NO MOMENTO DA MONTAGEM NÃO SERÁ PERMITIDO O CANCELAMENTO DE ALGUM ITEM POR FALTA DE ESPAÇO",15, 95);
          pdf.text("3 - Caso a montagem dos itens seja em área aberta, sem cobertura, e no momento de montagem esteja chovendo,",15, 100);
          pdf.text("cabe ao LOCATÁRIO providenciar uma cobertura à sua escolha, para que os itens sejam montados.",15, 105);
          pdf.text("OU em casos extremos as duas partes fiquem impossibilitadas do mesmo, o LOCATÁRIO tem o DIREITO",15, 110);
          pdf.text("DE ESCOLHER UMA NOVA DATA, desde que, esta seja uma data livre,e terá somente como despesao que se",15, 115);
          pdf.text("gastar com combustivel para a equipe dar continuídade ao trabalho.",15, 120);
          pdf.text("4 - Durante o evento caso não seja contratados monitores, o LOCATÁRIO ficará responsável por quaisquer danos",15, 125);
          pdf.text("materiais aos equipamentos bem como danos físicos a qualquer usuário do mesmo.",15, 130);
          pdf.text("5 - Cabe ao LOCATÁRIO o zelo e cuidado com os brinquedos e decorações e providenciar para que não sejam",15, 135);
          pdf.text("danificados os componentes que acompanham os equipamentos como BOLINHAS, INJETÁVEIS,",15, 140);
          pdf.text("LONA DE SALTO, MOLAS, REDE DE PROTEÇÃO,ESCADA, entre outros, conforme o brinquedo contratado.",15,145); 
          pdf.text("ITENS LOCADOS:",15, 155);

          pdf.setFontSize(10).setFontType('normal');
          pdf.text("De acordo, Vovô Brinquedos para Festas.",15, 220);
          pdf.text("Desde já agradecemos a preferência.",15, 225);
         
          var data = new Date();
          var dia = String(data.getDate()).padStart(2, '0');
          var mes = String(data.getMonth() + 1).padStart(2, '0');
          var ano = data.getFullYear();
          dataAtual = dia + '/' + mes + '/' + ano;  
          pdf.setFontSize(10).setFontType('bold');
          pdf.text("São Paulo " + dataAtual +".",15, 235);
          pdf.text("___________________________                                  ___________________________",35,265);
          pdf.text("              LOCATÁRIO                                                                     LOCADOR",35,270);  


          for (var i = 0; i < itens.length; i++) {
            pdf.text("Itens: " + itens[i], 16, 160 + i * 5);
          }
          pdf.save("contrato.pdf"); // Salva o PDF com o nome "contrato.pdf"
        });
      }
    </script>
  </body>
</html>
